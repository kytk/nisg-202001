# FreeSurfer勉強会

## 第2部(2) 縦断解析

### SUBJECTS_DIRの設定

- Lin4Neuro

	```
	===================================
	nisg=/media/sf_share/nisg-202001
	===================================
	```

- MacOS

	```
	===================================
	nisg=~/git/nisg-202001
	===================================
	```


```
========================================
SUBJECTS_DIR=$nisg/subjects
========================================
```

- $SUBJECTS_DIR は、自分で変更できます。これを使うことで、任意の場所にFreeSurferの結果を保存できます。


### 勉強会に使ったデータの確認

```
========================================
cd $nisg/nifti
ls
========================================
```


### fs_qc_base.sh

```
========================================
cd $SUBJECTS_DIR
fs_qc_base.sh OAS2_0013
========================================
```


### for文のワンライナー

```
========================================
for n in 1 2 3; do echo "MR_$n"; done
========================================
```


### fs_qc_long.shをfor文のワンライナーにいれこむ

```
========================================
for f in OAS2_????; do fs_qc_long.sh $f; done
========================================
```


### OASISデータセットに付属しているExcelファイルの確認

```
========================================
cd qdec
open oasis_longitudinal.xls
========================================
```


### 縦断解析のために作成したデータ

```
========================================
column -t long.qdec.table.dat
========================================
```

- column は、Linux/macOSにあるコマンドで、入力を複数列に整形します。-t で入力行の列数を自動で判定し、表を作成します。

### fs_thick-spc.sh

```
========================================
fs_thick-spc.sh OAS2_0013
fs_thick-spc.sh OAS2_0157
========================================
```


### long_stats_slopes の例

```
========================================
long_stats_slopes \
 --qdec=qdec/long.qdec.table.dat \
 --stats=lh.aparc.stats \
 --meas=thickness \
 --sd=$SUBJECTS_DIR \
 --do-rate \
 --do-pc1 \
 --do-spc
========================================
```


### long_stats_slopes で spc をまとめて出力する

```
========================================
long_stats_slopes \
 --qdec=qdec/long.qdec.table.dat \
 --stats=lh.aparc.stats \
 --meas=thickness \
 --sd=$SUBJECTS_DIR \
 --do-spc \
 --stack-spc=tables/lh.thick.spc.csv
========================================
```

